<%- include('../partials/header') %>

<div style="display: flex; min-height: 90vh;">
  <!-- Sidebar -->
  <div style="width: 250px; background: #f8f9fa; padding: 1rem; border-right: 1px solid #ddd;">
    <h4>Admin Panel</h4>
    <ul style="list-style: none; padding-left: 0;">
      <li><a href="/admin/dashboard" style="display: block; padding: 0.5rem;">📊 Dashboard</a></li>
      <li><a href="/admin/users" style="display: block; padding: 0.5rem;">👤 Manage Users</a></li>
      <li><a href="/admin/bookings" style="display: block; padding: 0.5rem;">🏨 Manage Bookings</a></li>
      <li><a href="/admin/coupons" style="display: block; padding: 0.5rem;">🎟️ Manage Coupons</a></li>
      <li><a href="/admin/rooms" style="display: block; padding: 0.5rem;">🛏️ Manage Rooms</a></li>
      <li><a href="/auth/logout" style="display: block; padding: 0.5rem; color: red;">🚪 Logout</a></li>
    </ul>
  </div>

  <!-- Main Dashboard Content -->
  <div style="flex-grow: 1; padding: 2rem;">
    <h2>Welcome Admin</h2>

    <div class="row mt-4">
      <div class="col-md-3">
        <div class="card p-3 mb-3"><h5>Total Revenue</h5><p>$<%= stats.revenue %></p></div>
      </div>
      <div class="col-md-3">
        <div class="card p-3 mb-3"><h5>Pending Bookings</h5><p><%= stats.pending %></p></div>
      </div>
      <div class="col-md-3">
        <div class="card p-3 mb-3"><h5>Total Bookings</h5><p><%= stats.total %></p></div>
      </div>
      <div class="col-md-3">
        <div class="card p-3 mb-3"><h5>Active Users</h5><p><%= stats.users %></p></div>
      </div>
    </div>

    <!-- Chart -->
    <h4 class="mt-5">📈 Monthly Booking Analytics</h4>
    <canvas id="bookingChart" height="100"></canvas>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('bookingChart').getContext('2d');
  const bookingChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: <%- JSON.stringify(chartData.labels) %>,
      datasets: [{
        label: 'Bookings per Month',
        data: <%- JSON.stringify(chartData.data) %>,
        backgroundColor: 'rgba(54, 162, 235, 0.5)',
        borderColor: 'rgba(54, 162, 235, 1)',
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
</script>

<%- include('../partials/footer') %>
